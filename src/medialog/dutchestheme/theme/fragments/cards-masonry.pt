
<section id="card-items"
    tal:define="keyword view/data/keyword|None;
		buttontext view/data/buttontext|None;
		items python:context.portal_catalog(Subject='%s' % keyword, sort_on='modified', sort_order='descending');
		f_id view/id"
    class="cards-${f_id}">
<tal:check tal:condition="items"
	    tal:define="image_size view/data/image_size|None;
	        css_class view/css_class|None;
	        color1 view/data/color1">

		<tal:repeat tal:repeat="item items">
			<div class="card" tal:define="item_url item/getURL|item/absolute_url|None">
				<img class="card-img-top" alt="${item/Title}" title="${item/Title}"
					 src="${item_url}/@@images/image/${image_size}" />
				<div class="card-block padding-20">
				    <a href="${item_url}"><h3 class="card-title">
						${item/Title}
					</h3></a>
					<p class="card-text">
						${item/Description}
					</p>
					<p>
						<a tal:condition="buttontext"
                class="btn btn-primary ${color1}"
                href="${item_url}">
                ${buttontext}
            </a>
						<!--a class="btn" href="${item_url}">Action</a-->
					</p>
				</div>
		    </div>
		</tal:repeat>
</tal:check>
<style tal:define="small view/small; medium view/medium; large view/large">
    <tal:check tal:condition="view/data/image_height|None">
        .cards-${f_id} img.card-img-top {
            object-fit: cover;
            height: ${view/data/image_height}px !important;
            object-position: ${view/data/position-x|None}% ${view/data/position-y|None}%;
        }
    </tal:check>
    	.card {
			margin: 0 1% 2% 1%;
			box-sizing: border-box;
			}

		.card .btn { margin-top: 10px}

		@media only screen and (min-width: 768px) {
			#card-items .card {
				width: ${small}%;
				}
			}

			@media screen and (min-width: 900px) {
				#card-items .card{
						width: ${medium}%;
				}
			}

		@media screen and (min-width: 1200px) {
			#card-items .card {
						width: ${large}%;
				}
		}

		img.card-img-top {
			height: auto;
			width: 100%;
		}

		.margin-10-0 { margin 10px 0}
	</style>


<script>require([
  'jquery',
  '++theme++dutchestheme/javascript/masonry.pkgd.min',
  '++theme++dutchestheme/javascript/imagesloaded.pkgd.min'
  ], function(Base) {
    'use strict';
    $('#card-items').imagesLoaded(function() {
      $('#card-items').masonry();
    });
  });
</script>

</section>
